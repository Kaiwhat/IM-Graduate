<!doctype html>
h1 { font-size: 20px; margin: 0 0 8px; }
h3 { margin: 14px 0 6px; }
table { width: 100%; border-collapse: collapse; }
th, td { border: 1px solid #333; padding: 6px; }
thead th { background: #f0f0f0; }
tr { break-inside: avoid; }
.meta { color:#555; margin-bottom: 10px; }
.two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
</style>
</head>

<body>
    <h1>資管系畢業學分自我檢核表</h1>
    <div class="meta">
        產製時間：{{ruleSummary.generatedAt}}
    </div>


    <div class="two-col">
        <table>
            <thead>
                <tr>
                    <th colspan="2">學分彙總</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>全校共同</th>
                    <td>{{fmtPair ruleSummary.byBucket.common ruleSummary.requiredMin}}</td>
                </tr>
                <tr>
                    <th>通識</th>
                    <td>{{fmtPair ruleSummary.byBucket.general ruleSummary.generalMin}}</td>
                </tr>
                <tr>
                    <th>基礎院本</th>
                    <td>{{ruleSummary.byBucket.foundation}}</td>
                </tr>
                <tr>
                    <th>系專業</th>
                    <td>{{ruleSummary.byBucket.major}}</td>
                </tr>
                <tr>
                    <th>自由選修</th>
                    <td>{{ruleSummary.byBucket.free}}</td>
                </tr>
                <tr>
                    <th>體育</th>
                    <td>{{#if ruleSummary.pe.passed}}已通過
                        ({{ruleSummary.pe.earned}}/{{ruleSummary.pe.required}}){{else}}未完成
                        ({{ruleSummary.pe.earned}}/{{ruleSummary.pe.required}}){{/if}}</td>
                </tr>
                <tr>
                    <th>服務學習</th>
                    <td>{{#if ruleSummary.service.passed}}已通過
                        ({{ruleSummary.service.count}}/{{ruleSummary.service.required}}){{else}}未完成
                        ({{ruleSummary.service.count}}/{{ruleSummary.service.required}}){{/if}}</td>
                </tr>
            </tbody>
        </table>


        <table>
            <thead>
                <tr>
                    <th colspan="2">畢業總學分</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>累計</th>
                    <td>{{fmtPair ruleSummary.graduation.earned ruleSummary.graduation.required}}</td>
                </tr>
                {{#if summary.graduation_total}}
                <tr>
                    <th>頁面摘要</th>
                    <td>{{fmtPair summary.graduation_total.earned summary.graduation_total.required}}</td>
                </tr>
                {{/if}}
            </tbody>
        </table>
    </div>


    <h3>修課明細</h3>
    <table>
        <thead>
            <tr>
                <th>類別</th>
                <th>領域</th>
                <th>科目</th>
                <th>必/選</th>
                <th>群</th>
                <th>開課單位</th>
                <th>科目學分</th>
                <th>實得學分</th>
            </tr>
        </thead>
        <tbody>
            {{#each data}}
            <tr>
                <td>{{category}}</td>
                <td>{{domain}}</td>
                <td>{{course.code}} {{course.name}}</td>
                <td>{{req_type}}</td>
                <td>{{group}}</td>
                <td>{{offered_by}}</td>
                <td>{{course_credits}}</td>
                <td>{{earned_credits_course}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</body>

</html>